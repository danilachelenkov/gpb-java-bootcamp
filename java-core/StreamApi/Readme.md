# Stateless vs Stateful –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Stream API

## 1. Stateless-–æ–ø–µ—Ä–∞—Ü–∏–∏: –Ω–µ –ø–æ–º–Ω—è—Ç –ø—Ä–æ—à–ª–æ–µ

Stateless-–æ–ø–µ—Ä–∞—Ü–∏–∏ **–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –∏ **–Ω–µ —Ö—Ä–∞–Ω—è—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏**. –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ.

**–ü—Ä–∏–º–µ—Ä—ã stateless-–æ–ø–µ—Ä–∞—Ü–∏–π –≤ Stream API:**
- `map`
- `filter`
- `peek`
- `flatMap`

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ stateless-–æ–ø–µ—Ä–∞—Ü–∏–π:
- ‚úÖ –•–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –Ω–∞ `parallelStream()`;
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è;
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ —Å–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è/–ø—Ä–µ–¥–∏–∫–∞—Ç –Ω–µ –∑–∞–≤—è–∑–∞–Ω–∞ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫).

> üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –µ—Å–ª–∏ –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é stateless-–æ–ø–µ—Ä–∞—Ü–∏–π ‚Äî –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —ç—Ç–æ –ª—É—á—à–∏–π –≤—ã–±–æ—Ä.

---

## 2. Stateful-–æ–ø–µ—Ä–∞—Ü–∏–∏: –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–æ—Ä—è–¥–∫–∞

Stateful-–æ–ø–µ—Ä–∞—Ü–∏–∏ **–∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Ç–æ–∫–∞** –∏ –¥–æ–ª–∂–Ω—ã ¬´–≤–∏–¥–µ—Ç—å¬ª —á–∞—Å—Ç—å –∏–ª–∏ –≤–µ—Å—å –ø–æ—Ç–æ–∫, —á—Ç–æ–±—ã –≤—ã–¥–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–û—Å–Ω–æ–≤–Ω—ã–µ stateful-–æ–ø–µ—Ä–∞—Ü–∏–∏:**
- `distinct`
- `sorted`
- `limit`
- `skip`

### –ü—Ä–∏–º–µ—Ä:

```java
List<Integer> numbers = List.of(5, 2, 3, 2, 1, 4, 3);

List<Integer> result = numbers.stream()
        .distinct()                 // stateful ‚Äî –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å —É–∂–µ –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        .sorted()                   // stateful ‚Äî –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        .limit(3)                   // stateful ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞
        .toList();
```
–ß—Ç–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:
- –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É–∂–µ —É–≤–∏–¥–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ç.–¥.);
- –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∞–ª–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤–µ—Å—å –ø–æ—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sorted`);
- —Å `parallelStream` —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –º–æ–≥—É—Ç –Ω–µ –¥–∞–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

Stateful-–æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –Ω–µ–∏–∑–±–µ–∂–Ω–æ. –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∏—Ö —Ü–µ–Ω—É –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏—Ö –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–ü–æ—ç—Ç–æ–º—É –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ç–µ—Å—Ç–µ –æ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ `sorted` –∑–∞–≤–∏—Å–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ç–∞–∫ –∫–∞–∫ `sorted` —Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ–≥–æ –ø–æ—Ç–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

–ü–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:

```java
List<Person> adultsSorted = people.stream()
        .sorted(Comparator.comparing(Person::age))  // stateful, —Ç—è–∂—ë–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
        .filter(p -> p.age() >= 18)                 // stateless
        .toList();

```
–ó–¥–µ—Å—å –º—ã —Å–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ—Ö, –∞ –ø–æ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä—É–µ–º.

–õ—É—á—à–µ —Ç–∞–∫:
```java
List<Person> adultsSorted = people.stream()
        .filter(p -> p.age() >= 18)                 // stateless
        .sorted(Comparator.comparing(Person::age))  // stateful, –Ω–æ —É–∂–µ –Ω–∞–¥ –º–µ–Ω—å—à–∏–º –Ω–∞–±–æ—Ä–æ–º
        .toList();
```
**–ü—Ä–∏–Ω—Ü–∏–ø:**

–°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –≤—ã–Ω–æ—Å–∏—Ç—å –ª–µ–≥–∫–∏–µ stateless-–æ–ø–µ—Ä–∞—Ü–∏–∏ (filter, –ø—Ä–æ—Å—Ç—ã–µ map) –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä—ë–º —Ä–∞–±–æ—Ç—ã –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö stateful-–æ–ø–µ—Ä–∞—Ü–∏–π.